<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Exercise 11 - Software Defined Infrastructure Group 2</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Exercise 11";
        var mkdocs_page_input_path = "ex11.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Software Defined Infrastructure Group 2
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Manual Server Management</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ex1/">Exercise 1</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex1/">Exercise 1</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex2/">Exercise 2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex3/">Exercise 3</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex4/">Exercise 4</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex5/">Exercise 5</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex6/">Exercise 6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex7/">Exercise 7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex8/">Exercise 8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex9/">Exercise 9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex10/">Exercise 10</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cloud Provider</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Exercise 11</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#1-minimal-terraform-configuration">1. Minimal Terraform Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2-firewall-rule-for-ssh-access">2. Firewall Rule for SSH Access</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#3-hetzner-api-token">3. Hetzner API Token</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#4-server-creation-and-initial-login">4. Server Creation and Initial Login</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#5-switching-to-publicprivate-key-authentication">5. Switching to Public/Private Key Authentication</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#6-outputs-configuration">6. Outputs Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#7-version-control-with-git">7. Version Control with Git</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex12/">Exercise 12</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex13/">Exercise 13</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex14/">Exercise 14</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex15/">Exercise 15</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex16/">Exercise 16</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex17/">Exercise 17</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex18/">Exercise 18</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex19/">Exercise 19</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ex20/">Exercise 20</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Software Defined Infrastructure Group 2</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Cloud Provider</li>
      <li class="breadcrumb-item active">Exercise 11</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="excersise-11-creating-a-basic-server-with-terraform-on-hetzner-cloud">Excersise 11: Creating a Basic Server with Terraform on Hetzner Cloud</h1>
<h3 id="1-minimal-terraform-configuration">1. Minimal Terraform Configuration</h3>
<p>We started from a minimal Terraform configuration (based on Figure 1004) and defined a Hetzner Cloud server resource. The provider was initialized using the Hetzner API token.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>Created a new Terraform project.</li>
<li>Initialized the backend using:</li>
</ol>
<pre class="highlight"><code class="language-hlc">terraform init</code></pre>
<p>Confirmation: <code>Terraform has been successfully initialized!</code></p>
<ol>
<li>
<p>Defined a <code>hcloud_server</code> resource (<code>exercise-11</code>) with:</p>
</li>
<li>
<p>Debian 12 image</p>
</li>
<li>cpx11 server type</li>
<li>40 GB disk</li>
<li>Firewall configuration</li>
<li>SSH key access.</li>
</ol>
<h3 id="2-firewall-rule-for-ssh-access">2. Firewall Rule for SSH Access</h3>
<p>An inbound firewall rule was added to allow SSH (port 22) connections.
This was necessary to establish secure remote access to the server.</p>
<h3 id="3-hetzner-api-token">3. Hetzner API Token</h3>
<p>We entered the Hetzner Cloud API token to enable Terraform to authenticate with Hetzner.</p>
<p><strong>Note:</strong> Since version control is required, storing the token directly in the configuration would be unsafe. Instead, we followed the solution from Figure 1018 by placing the token in a separate file (not committed to Git).</p>
<h3 id="4-server-creation-and-initial-login">4. Server Creation and Initial Login</h3>
<p>Running:</p>
<pre class="highlight"><code class="language-hcl">terraform apply</code></pre>
<p>Terraform created the server successfully:</p>
<pre class="highlight"><code class="language-hcl">hcloud_server.exercise_11: Creation complete after 13s</code></pre>
<p>Hetzner automatically sent an email with the serverâ€™s IP address and root password.
This happens because no SSH key was yet associated with the server at the time of its first creation. For security, Hetzner provides initial credentials via email.</p>
<p>We verified login via:</p>
<pre class="highlight"><code class="language-hcl">ssh root@&lt;server-ip&gt;</code></pre>
<h3 id="5-switching-to-publicprivate-key-authentication">5. Switching to Public/Private Key Authentication</h3>
<p>To avoid insecure password-based login, we configured SSH key authentication.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>Created an hcloud_ssh_key resource with our public key.</li>
<li>Attached the SSH key to the server resource in Terraform.</li>
<li>Reapplied Terraform configuration.</li>
<li>Verified login with:</li>
</ol>
<pre class="highlight"><code class="language-hcl">ssh -i ~/.ssh/id_rsa root@&lt;server-ip&gt;</code></pre>
<p>Now login works securely with our private key.</p>
<h3 id="6-outputs-configuration">6. Outputs Configuration</h3>
<p>To automatically display the server IP and datacenter, we added an outputs.tf file with:</p>
<pre class="highlight"><code class="language-hcl">output "server_ip" {
  value = hcloud_server.exercise_11.ipv4_address
}

output "server_datacenter" {
  value = hcloud_server.exercise_11.datacenter
}</code></pre>
<p>On success, the output looked like:</p>
<pre class="highlight"><code class="language-hcl">Apply complete! Resources: 3 added, 0 changed, 0 destroyed.

Outputs:

server_datacenter = "hel1-dc2"
server_ip         = "95.216.223.223"</code></pre>
<h3 id="7-version-control-with-git">7. Version Control with Git</h3>
<p>The Terraform configuration was placed under version control in a Git repository.
To avoid leaking secrets, the Hetzner API token was excluded by using <code>.gitignore</code> and a separate file approach.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../ex10/" class="btn btn-neutral float-left" title="Exercise 10"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../ex12/" class="btn btn-neutral float-right" title="Exercise 12">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../ex10/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ex12/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
