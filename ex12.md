# Excersise 12: Automatic Nginx Installation Using Terraform and Cloud-init

### 1. Objective

The goal of this exercise was to automatically install and configure the Nginx web server on a newly created Hetzner Cloud instance using a user_data script in Terraform. Additionally, SSH password login and root login were disabled, and a dedicated user was created for secure access.

### 2. Implementation Steps

**2.1 Terraform Configuration with Cloud-init**
A `user_data` script was integrated into the Terraform configuration. This script was executed during server initialization and performed the following actions:

**1. Installed Nginx**
Used the package manager (`apt-get`) to install the Nginx web server.

**2. Started the Nginx Service**
Activated the service immediately with:

```hcl
systemctl start nginx
```

**3. Enabled Nginx on Boot**
Configured Nginx to start automatically after server restarts:

```hcl
systemctl enable nginx
```

### 2.2 User and Security Configuration

The Cloud-init script included additional security hardening:

- Disabled SSH Password Login

```hcl
ssh_pwauth: false
```

- Disabled Root Login

```hcl
disable_root: true
```

- Created a New User (`devops`) - Added to the sudo group. - Configured with SSH key authentication. - Verified login with:
  `hcl
ssh devops@<server-ip>
`
  Attempted root login now returns:
  **“Please login as the user NONE”**, confirming root access is blocked.

### 2.3 Verification of Nginx

After the server was created and initialized, accessing the server’s public IP in a browser displayed the default Nginx landing page:

```hcl
Welcome to nginx!
If you see this page, the nginx web server is successfully installed and working.
```

This confirmed that the automated installation and configuration were successful.

### 3. Outputs

The Terraform `outputs.tf` file was used to display relevant information:

```hcl
output "server_ip" {
  value = hcloud_server.exercise_11.ipv4_address
}

output "server_datacenter" {
  value = hcloud_server.exercise_11.datacenter
}
```

Result after apply:

```hcl
Apply complete! Resources: 1 added, 0 changed, 0 destroyed.

Outputs:

server_datacenter = "hel1-dc2"
server_ip         = "95.216.223.223"
```
